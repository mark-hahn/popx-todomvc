
# taskmvc web app popx declaration

project:
  name:         taskmvc
  description:  A popx taskmvc example for taskmvc.com
  author:       Mark Hahn <mark@hahnca.com>
  repository:   mark-hahn/popx-taskmvc

modules:
  # watch new task text input
  newTextInp: 
    $require:   $dom
    $sel:       ["#new-task-inp"]
    changeEvt:  newTaskLbl
    $value:     newTaskLbl
    
  # create new task instance
  newTaskInst:
    $require:   $new
    $class:     [Object]
    label:      newTaskLbl
    done:       [false]
    $instance:  taskItem
    
  # turn task instance into DOM element
  # uses moustache template from file
  newItemEle:
    $require:   $dom
    $op:        [createElement]
    $model:     taskItem
    $template:  [file, item.html]
    $ele:       taskEle
  
  # add task ele to ele list (model)  
  addItemToList:
    $require:   $arrayOps
    $op:        [unshift]
    $item:      taskEle
    $array:     taskEles
    
  # watch all task done checkbox inputs
  doneChkboxes:
    $require:   $dom
    $sel:       [.done-chkbox]
    $value:     itemChecked
    changeEvt:  itemChecked
    
  # set class to checked if wire itemChecked is true
  showItemDone:
    $require:   $dom
    $sel:       [.task-item]
    $class:     [checked, itemChecked]
      
  # watch all delete buttons
  deleteBtns:
    $require:   $dom
    $sel:       [.del-btn]
    $evtTarget: deleteEle
    $clickEvt:  [deleteEle, delete] # del from DOM
  
  # remove ele from task list on deleteEle event
  removeItem:
    $require:   $arrayOps
    $op:        [delete] # del from list
    $trigger:   deleteEle
    $item:      taskEle
    $array:     taskEles
    
  # create/add dom children and react to changes in list
  showList:
    $require:   $dom
    $sel:       [#task-list]
    $op:        [updateChildren]
    $value:     taskEles
  
  # print changes to console for any wires listed
  log:
    $require:   $log
    newTaskLbl:
    taskItem:
    taskEle:
    itemChecked:
    deleteEle:
    taskEles:
      
  